# Bifrost Client Configuration for Docker
# Uses 0.0.0.0 bindings for container networking to allow access from outside the container.

# Local proxy settings
proxy:
  http:
    listen: "0.0.0.0:7380"     # Listen on all interfaces
    read_timeout: "30s"
    write_timeout: "30s"
    idle_timeout: "60s"
  socks5:
    listen: "0.0.0.0:7381"     # Listen on all interfaces

# Bifrost server connection
server:
  address: "bifrost-server:7080" # Name of the server container in docker-compose
  protocol: http  # http, socks5
  timeout: "30s"
  retry_count: 3
  retry_delay: "1s"

# Client-side routing rules
routes:
  # Direct connection for local addresses
  - domains:
      - "localhost"
      - "127.0.0.1"
      - "*.local"
    action: direct
    priority: 100

  # Everything else through the server
  - domains:
      - "*"
    action: server
    priority: 1

# Traffic debugging
debug:
  enabled: true
  max_entries: 1000
  capture_body: false
  max_body_size: 65536  # 64KB

# Application logging
logging:
  level: info
  format: text
  output: stdout

# Web UI (local dashboard)
web_ui:
  enabled: true
  listen: "0.0.0.0:7382"

# REST API
api:
  enabled: true
  listen: "0.0.0.0:7383"

# System tray - disabled in Docker as there is no desktop environment
tray:
  enabled: false
